<div class="container mt-5">
  <!-- Nút quay lại -->
  <div class="back-link-wrapper">
    <a href="/admin/hokhau" class="back-link">
      <span class="back-link__icon">←</span>
      <span class="back-link__text">Trở về danh sách hộ khẩu</span>
    </a>
  </div>

  <h2 class="green-header text-center mb-4">Chi tiết sổ hộ khẩu</h2>

  {{#if success_msg}}
    <div class="alert alert-success">{{success_msg}}</div>
  {{/if}}

  {{#if error_msg}}
    <div class="alert alert-danger">{{error_msg}}</div>
  {{/if}}

  <form id="nhanKhauForm" action="/admin/hokhau/{{hokhau.idSoHoKhau}}/update" method="POST">
    <div class="card shadow">
      <div class="card-body">
        <div class="mb-3">
          <label class="form-label fw-bold">ID:</label>
          <p class="form-control-plaintext" id="view-idNhanKhau">{{hokhau.idSoHoKhau}}</p>
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Số sổ hộ khẩu:</label>
          <p class="form-control-plaintext view-mode">{{hokhau.soSoHoKhau}}</p>
          <input type="text" class="form-control edit-mode" name="soSoHoKhau" value="{{hokhau.soSoHoKhau}}" style="display: none;">
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Họ tên chủ hộ:</label>
          <p class="form-control-plaintext view-mode">{{hokhau.hoTenChu}}</p>
          <input type="text" class="form-control edit-mode" name="hoTenChu" value="{{hokhau.hoTenChu}}" style="display: none;">
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Thông tin thêm:</label>
          <p class="form-control-plaintext view-mode">{{hokhau.thongTinThem}}</p>
          <input type="text" class="form-control edit-mode" name="thongTinThem" value="{{hokhau.thongTinThem}}" style="display: none;">
        </div>
      </div>

      <div class="card-footer d-flex justify-content-between">
        <div>
          <button type="button" id="editBtn" class="btn btn-warning">Chỉnh sửa</button>
          <button type="submit" id="saveBtn" class="btn btn-success" style="display: none;">Lưu</button>
        </div>
        <div>
          <!-- Nút xóa mở modal -->
          <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#confirmDeleteModal">Xóa</button>
        </div>
      </div>
    </div>
  </form>

  <!-- Modal xác nhận xoá -->
  <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="confirmDeleteModalLabel">Xác nhận xóa?</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
        </div>
        <div class="modal-body text-center">
          Bạn có chắc muốn xóa sổ hộ khẩu
          <strong>{{hokhau.soSoHoKhau}}</strong>
          không?
        </div>
        <div class="modal-footer justify-content-center">
          <form action="/admin/hokhau/{{hokhau.idSoHoKhau}}/delete" method="POST">
            <button type="submit" class="btn btn-success px-4">Đồng ý</button>
          </form>
          <button type="button" class="btn btn-danger px-4" data-bs-dismiss="modal">Từ chối</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('editBtn').addEventListener('click', function () {
    document.querySelectorAll('.view-mode').forEach(el => el.style.display = 'none');
    document.querySelectorAll('.edit-mode').forEach(el => el.style.display = 'block');
    document.getElementById('editBtn').style.display = 'none';
    document.getElementById('saveBtn').style.display = 'inline-block';
  });
</script>
